import React from 'react';
import { useNavigate, useLocation } from 'react-router-dom';
import styled from 'styled-components';
import useStore from '../store';

const NavigationContainer = styled.nav`
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: ${({ theme }) => theme === 'dark' ? '#23272A' : '#fff'};
  border-top: 1px solid ${({ theme }) => theme === 'dark' ? '#333' : '#E5E8EB'};
  display: flex;
  justify-content: space-around;
  padding: 8px 0;
  z-index: 1000;
  transition: background 0.3s, border-color 0.3s;
`;

const NavButton = styled.button`
  display: flex;
  flex-direction: column;
  align-items: center;
  background: none;
  border: none;
  padding: 8px 16px;
  cursor: pointer;
  opacity: 1;
  transition: none;
`;

const IconWrapper = styled.div`
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 4px;

  svg {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }
`;

const Label = styled.span`
  font-size: 12px;
  color: ${({ active, theme }) => active ? '#005EFF' : (theme === 'dark' ? '#fff' : '#222')};
  transition: color 0.3s;
`;

const BottomNavigation = () => {
  const navigate = useNavigate();
  const location = useLocation();
  const theme = useStore((state) => state.theme);

  const navItems = [
    {
      path: '/',
      label: 'Главная',
      activeIcon: (
        <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M20.2009 1.46052C20.538 1.70984 20.8459 1.98796 21.1502 2.27594C21.2062 2.32707 21.2623 2.37819 21.3201 2.43086C22.1744 3.23944 22.7843 4.24337 23.3571 5.26177C23.4063 5.3481 23.4556 5.4344 23.5049 5.52065C23.5603 5.61742 23.5603 5.61742 23.6167 5.71614C23.6935 5.71461 23.6935 5.71461 23.7718 5.71305C25.8613 5.67712 27.9751 5.79576 29.7547 7.01838C30.033 7.17525 30.1241 7.14489 30.4322 7.07924C31.2086 7.01943 31.838 7.15386 32.4439 7.65987C32.8958 8.12233 33.0938 8.66471 33.1178 9.30238C33.106 9.94924 32.8902 10.5012 32.4444 10.9738C32.2107 11.1685 32.2107 11.1685 32.055 11.1685C32.0665 11.2212 32.078 11.2738 32.0899 11.328C32.3052 12.9824 31.452 14.9384 30.5892 16.3073C30.5479 16.373 30.5479 16.373 30.5058 16.44C30.4525 16.5236 30.3981 16.6065 30.3425 16.6885C30.2583 16.814 30.2583 16.814 30.1726 17.0104C30.241 17.2321 30.3479 17.4233 30.4672 17.6214C31.331 19.0784 31.9815 20.5933 32.0996 22.3005C32.1027 22.3456 32.1059 22.3908 32.1092 22.4373C32.1209 22.6414 32.1203 22.7861 32.055 22.982C32.0924 22.9983 32.1299 23.0145 32.1685 23.0312C32.5752 23.2557 32.84 23.6491 32.9961 24.0774C33.1684 24.6805 33.1539 25.2604 32.8988 25.838C32.5702 26.4031 32.094 26.8265 31.471 27.0292C31.0489 27.1203 30.6147 27.1185 30.1969 27.0105C29.8816 27.0046 29.714 27.1581 29.4588 27.3327C28.0277 28.2726 26.2441 28.4272 24.5823 28.4709C24.482 28.4737 24.3818 28.4766 24.2816 28.4794C24.0383 28.4863 23.7951 28.4929 23.5518 28.4993C23.5179 28.5669 23.4841 28.6345 23.4491 28.7042C22.4358 30.6912 20.9471 32.6042 18.8134 33.4324C18.7413 33.4606 18.6692 33.4888 18.5949 33.5179C17.2981 33.9399 15.8467 33.7752 14.639 33.185C13.9607 32.8356 13.3949 32.3989 12.8418 31.8746C12.781 31.8187 12.7201 31.7628 12.6574 31.7052C11.695 30.801 11.0239 29.6734 10.4401 28.4993C10.3535 28.4979 10.3535 28.4979 10.2651 28.4965C8.03058 28.4557 8.03058 28.4557 6.93503 28.2397C6.88872 28.2307 6.8424 28.2218 6.79469 28.2126C5.86945 28.0268 5.03682 27.6585 4.23825 27.1611C3.97983 27.0154 3.84177 26.9942 3.55974 27.0713C2.91542 27.1252 2.35729 27.0705 1.82468 26.6826C1.27872 26.2157 0.945038 25.7421 0.884259 25.0203C0.861315 24.3406 1.0267 23.814 1.48264 23.3066C1.56636 23.2429 1.56636 23.2429 1.65176 23.178C1.88888 22.879 1.87435 22.5752 1.9005 22.2031C2.05946 20.5181 2.66875 19.0287 3.54123 17.5885C3.59078 17.504 3.64024 17.4195 3.68956 17.3349C3.72295 17.2791 3.75633 17.2233 3.79073 17.1658C3.83616 16.9193 3.70084 16.7643 3.56786 16.5682C3.51253 16.4814 3.45752 16.3944 3.40279 16.3073C3.37465 16.2626 3.3465 16.218 3.3175 16.172C2.49071 14.8135 2.00269 13.3135 1.8884 11.7321C1.86627 11.3316 1.86627 11.3316 1.65379 11.0111C1.59731 10.9774 1.54083 10.9436 1.48264 10.9089C0.9961 10.2722 0.824807 9.69474 0.898458 8.8967C1.02323 8.32888 1.30116 7.83173 1.77017 7.48036C2.35694 7.11118 2.8743 7.04261 3.55974 7.07924C3.67621 7.10936 3.67621 7.10936 3.79504 7.14009C4.1077 7.14588 4.26749 6.99531 4.5207 6.82213C6.25504 5.71538 8.38936 5.67656 10.3752 5.71614C10.4365 5.60318 10.4365 5.60318 10.499 5.48794C11.129 4.33432 11.8185 3.25123 12.7769 2.34085C12.8294 2.28772 12.882 2.23459 12.9361 2.17985C14.955 0.182625 17.8416 -0.127121 20.2009 1.46052Z" fill="#005EFF"/>
        </svg>
      ),
      inactiveIcon: (
        <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M20.2009 1.46052C20.538 1.70984 20.8459 1.98796 21.1502 2.27594C21.2062 2.32707 21.2623 2.37819 21.3201 2.43086C22.1744 3.23944 22.7843 4.24337 23.3571 5.26177C23.4063 5.3481 23.4556 5.4344 23.5049 5.52065C23.5603 5.61742 23.5603 5.61742 23.6167 5.71614C23.6935 5.71461 23.6935 5.71461 23.7718 5.71305C25.8613 5.67712 27.9751 5.79576 29.7547 7.01838C30.033 7.17525 30.1241 7.14489 30.4322 7.07924C31.2086 7.01943 31.838 7.15386 32.4439 7.65987C32.8958 8.12233 33.0938 8.66471 33.1178 9.30238C33.106 9.94924 32.8902 10.5012 32.4444 10.9738C32.2107 11.1685 32.2107 11.1685 32.055 11.1685C32.0665 11.2212 32.078 11.2738 32.0899 11.328C32.3052 12.9824 31.452 14.9384 30.5892 16.3073C30.5479 16.373 30.5479 16.373 30.5058 16.44C30.4525 16.5236 30.3981 16.6065 30.3425 16.6885C30.2583 16.814 30.2583 16.814 30.1726 17.0104C30.241 17.2321 30.3479 17.4233 30.4672 17.6214C31.331 19.0784 31.9815 20.5933 32.0996 22.3005C32.1027 22.3456 32.1059 22.3908 32.1092 22.4373C32.1209 22.6414 32.1203 22.7861 32.055 22.982C32.0924 22.9983 32.1299 23.0145 32.1685 23.0312C32.5752 23.2557 32.84 23.6491 32.9961 24.0774C33.1684 24.6805 33.1539 25.2604 32.8988 25.838C32.5702 26.4031 32.094 26.8265 31.471 27.0292C31.0489 27.1203 30.6147 27.1185 30.1969 27.0105C29.8816 27.0046 29.714 27.1581 29.4588 27.3327C28.0277 28.2726 26.2441 28.4272 24.5823 28.4709C24.482 28.4737 24.3818 28.4766 24.2816 28.4794C24.0383 28.4863 23.7951 28.4929 23.5518 28.4993C23.5179 28.5669 23.4841 28.6345 23.4491 28.7042C22.4358 30.6912 20.9471 32.6042 18.8134 33.4324C18.7413 33.4606 18.6692 33.4888 18.5949 33.5179C17.2981 33.9399 15.8467 33.7752 14.639 33.185C13.9607 32.8356 13.3949 32.3989 12.8418 31.8746C12.781 31.8187 12.7201 31.7628 12.6574 31.7052C11.695 30.801 11.0239 29.6734 10.4401 28.4993C10.3535 28.4979 10.3535 28.4979 10.2651 28.4965C8.03058 28.4557 8.03058 28.4557 6.93503 28.2397C6.88872 28.2307 6.8424 28.2218 6.79469 28.2126C5.86945 28.0268 5.03682 27.6585 4.23825 27.1611C3.97983 27.0154 3.84177 26.9942 3.55974 27.0713C2.91542 27.1252 2.35729 27.0705 1.82468 26.6826C1.27872 26.2157 0.945038 25.7421 0.884259 25.0203C0.861315 24.3406 1.0267 23.814 1.48264 23.3066C1.56636 23.2429 1.56636 23.2429 1.65176 23.178C1.88888 22.879 1.87435 22.5752 1.9005 22.2031C2.05946 20.5181 2.66875 19.0287 3.54123 17.5885C3.59078 17.504 3.64024 17.4195 3.68956 17.3349C3.72295 17.2791 3.75633 17.2233 3.79073 17.1658C3.83616 16.9193 3.70084 16.7643 3.56786 16.5682C3.51253 16.4814 3.45752 16.3944 3.40279 16.3073C3.37465 16.2626 3.3465 16.218 3.3175 16.172C2.49071 14.8135 2.00269 13.3135 1.8884 11.7321C1.86627 11.3316 1.86627 11.3316 1.65379 11.0111C1.59731 10.9774 1.54083 10.9436 1.48264 10.9089C0.9961 10.2722 0.824807 9.69474 0.898458 8.8967C1.02323 8.32888 1.30116 7.83173 1.77017 7.48036C2.35694 7.11118 2.8743 7.04261 3.55974 7.07924C3.67621 7.10936 3.67621 7.10936 3.79504 7.14009C4.1077 7.14588 4.26749 6.99531 4.5207 6.82213C6.25504 5.71538 8.38936 5.67656 10.3752 5.71614C10.4365 5.60318 10.4365 5.60318 10.499 5.48794C11.129 4.33432 11.8185 3.25123 12.7769 2.34085C12.8294 2.28772 12.882 2.23459 12.9361 2.17985C14.955 0.182625 17.8416 -0.127121 20.2009 1.46052Z" fill="#8A8A8A"/>
        </svg>
      )
    },
    {
      path: '/target',
      label: 'ИИ Центр',
      activeIcon: (
        <svg width="32" height="33" viewBox="0 0 32 33" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M16.1431 0.717773C16.7383 0.717773 17.325 0.750017 17.9033 0.814505C18.1103 0.837412 18.3107 0.900864 18.4932 1.00124C18.6757 1.10162 18.8366 1.23695 18.9667 1.39952C19.0969 1.56208 19.1938 1.74869 19.2518 1.9487C19.3099 2.1487 19.328 2.35818 19.3051 2.56518C19.2822 2.77217 19.2187 2.97263 19.1183 3.1551C19.018 3.33757 18.8826 3.49849 18.7201 3.62866C18.5575 3.75883 18.3709 3.8557 18.1709 3.91375C17.9709 3.9718 17.7614 3.98989 17.5544 3.96698C14.9411 3.67464 12.3016 4.20158 10.0009 5.47492C7.70024 6.74825 5.85208 8.70505 4.7121 11.0746C3.57212 13.4442 3.19666 16.1095 3.63764 18.7019C4.07862 21.2942 5.31425 23.6854 7.17363 25.5448C9.033 27.4041 11.4242 28.6398 14.0165 29.0808C16.6089 29.5217 19.2741 29.1463 21.6437 28.0063C24.0133 26.8663 25.9701 25.0182 27.2435 22.7175C28.5168 20.4168 29.0437 17.7773 28.7514 15.164C28.7285 14.957 28.7466 14.7475 28.8046 14.5475C28.8627 14.3475 28.9596 14.1609 29.0897 13.9983C29.3526 13.67 29.7352 13.4596 30.1532 13.4133C30.5713 13.3671 30.9906 13.4888 31.3189 13.7517C31.4814 13.8818 31.6168 14.0427 31.7171 14.2252C31.8175 14.4077 31.881 14.6081 31.9039 14.8151C31.9673 15.3934 31.9996 15.9801 32.0006 16.5753C32.0006 25.3334 24.9012 32.4329 16.1431 32.4329C7.38495 32.4329 0.285522 25.3334 0.285522 16.5753C0.285522 7.8172 7.38495 0.717773 16.1431 0.717773Z" fill="#005EFF"/>
        </svg>
      ),
      inactiveIcon: (
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M15.971 0.253662C16.5661 0.253662 17.1529 0.285906 17.7311 0.350393C17.9381 0.3733 18.1386 0.436753 18.3211 0.53713C18.5035 0.637506 18.6644 0.772841 18.7946 0.935406C18.9248 1.09797 19.0217 1.28458 19.0797 1.48459C19.1378 1.68459 19.1559 1.89407 19.1329 2.10107C19.11 2.30806 19.0466 2.50852 18.9462 2.69099C18.8458 2.87346 18.7105 3.03438 18.5479 3.16455C18.3854 3.29472 18.1988 3.39159 17.9988 3.44964C17.7987 3.50769 17.5893 3.52578 17.3823 3.50287C14.769 3.21053 12.1295 3.73747 9.82881 5.0108C7.52812 6.28414 5.67997 8.24094 4.53998 10.6105C3.4 12.9801 3.02454 15.6454 3.46552 18.2377C3.9065 20.8301 5.14213 23.2213 7.00151 25.0807C8.86088 26.94 11.2521 28.1757 13.8444 28.6166C16.4367 29.0576 19.102 28.6822 21.4716 27.5422C23.8412 26.4022 25.798 24.554 27.0714 22.2534C28.3447 19.9527 28.8716 17.3131 28.5793 14.6999C28.5564 14.4929 28.5745 14.2834 28.6325 14.0834C28.6906 13.8834 28.7874 13.6968 28.9176 13.5342C29.1805 13.2059 29.563 12.9955 29.9811 12.9492C30.3991 12.903 30.8184 13.0247 31.1468 13.2875C31.3093 13.4177 31.4447 13.5786 31.545 13.7611C31.6454 13.9436 31.7089 14.144 31.7318 14.351C31.7952 14.9293 31.8274 15.516 31.8285 16.1112C31.8285 24.8693 24.7291 31.9688 15.971 31.9688C7.21283 31.9688 0.113403 24.8693 0.113403 16.1112C0.113403 7.35309 7.21283 0.253662 15.971 0.253662Z" fill="#8A8A8A"/>
        </svg>
      )
    },
    {
      path: '/profile',
      label: 'Профиль',
      activeIcon: (
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M16 0C17.5913 0 19.1364 0.632141 20.364 1.75736C21.5915 2.88258 22.2222 4.4087 22.2222 6V6.22222C24.0035 6.22222 25.7121 6.93333 27.0711 8.22222C28.43 9.51111 29.3333 11.2 29.3333 13.1111V16C29.3333 16.4716 29.146 16.9237 28.8097 17.2599C28.4735 17.5961 28.0214 17.7778 27.5556 17.7778H4.44444C3.97864 17.7778 3.52656 17.5961 3.19032 17.2599C2.85408 16.9237 2.66667 16.4716 2.66667 16V13.1111C2.66667 11.2 3.57 9.51111 4.92889 8.22222C6.28778 6.93333 7.99644 6.22222 9.77778 6.22222V6C9.77778 4.4087 10.4084 2.88258 11.636 1.75736C12.8636 0.632141 14.4087 0 16 0ZM16 2.66667C15.2928 2.66667 14.6145 2.94762 14.1111 3.44811C13.6077 3.94859 13.3333 4.62174 13.3333 5.33333V6.22222H18.6667V5.33333C18.6667 4.62174 18.3922 3.94859 17.8889 3.44811C17.3855 2.94762 16.7072 2.66667 16 2.66667ZM16 20.4444C16.7072 20.4444 17.3855 20.1655 17.8889 19.665C18.3922 19.1645 18.6667 18.4914 18.6667 17.7778C18.6667 17.0642 18.3922 16.391 17.8889 15.8905C17.3855 15.39 16.7072 15.1111 16 15.1111C15.2928 15.1111 14.6145 15.39 14.1111 15.8905C13.6077 16.391 13.3333 17.0642 13.3333 17.7778C13.3333 18.4914 13.6077 19.1645 14.1111 19.665C14.6145 20.1655 15.2928 20.4444 16 20.4444Z" fill="#005EFF"/>
        </svg>
      ),
      inactiveIcon: (
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M16 0C17.5913 0 19.1364 0.632141 20.364 1.75736C21.5915 2.88258 22.2222 4.4087 22.2222 6V6.22222C24.0035 6.22222 25.7121 6.93333 27.0711 8.22222C28.43 9.51111 29.3333 11.2 29.3333 13.1111V16C29.3333 16.4716 29.146 16.9237 28.8097 17.2599C28.4735 17.5961 28.0214 17.7778 27.5556 17.7778H4.44444C3.97864 17.7778 3.52656 17.5961 3.19032 17.2599C2.85408 16.9237 2.66667 16.4716 2.66667 16V13.1111C2.66667 11.2 3.57 9.51111 4.92889 8.22222C6.28778 6.93333 7.99644 6.22222 9.77778 6.22222V6C9.77778 4.4087 10.4084 2.88258 11.636 1.75736C12.8636 0.632141 14.4087 0 16 0ZM16 2.66667C15.2928 2.66667 14.6145 2.94762 14.1111 3.44811C13.6077 3.94859 13.3333 4.62174 13.3333 5.33333V6.22222H18.6667V5.33333C18.6667 4.62174 18.3922 3.94859 17.8889 3.44811C17.3855 2.94762 16.7072 2.66667 16 2.66667ZM16 20.4444C16.7072 20.4444 17.3855 20.1655 17.8889 19.665C18.3922 19.1645 18.6667 18.4914 18.6667 17.7778C18.6667 17.0642 18.3922 16.391 17.8889 15.8905C17.3855 15.39 16.7072 15.1111 16 15.1111C15.2928 15.1111 14.6145 15.39 14.1111 15.8905C13.6077 16.391 13.3333 17.0642 13.3333 17.7778C13.3333 18.4914 13.6077 19.1645 14.1111 19.665C14.6145 20.1655 15.2928 20.4444 16 20.4444Z" fill="#8A8A8A"/>
        </svg>
      )
    }
  ];

  return (
    <NavigationContainer theme={theme}>
      {navItems.map(({ path, label, activeIcon, inactiveIcon }) => (
        <NavButton key={path} onClick={() => navigate(path)}>
          <IconWrapper>
            {location.pathname === path ? activeIcon : inactiveIcon}
          </IconWrapper>
          <Label active={location.pathname === path} theme={theme}>
            {label}
          </Label>
        </NavButton>
      ))}
    </NavigationContainer>
  );
};

export default BottomNavigation; 
